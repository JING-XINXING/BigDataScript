
include 'aws_util'

println "Before"

out := "$s3base/out.txt"
println "Output file: '$out'"

task(system := 'aws') {
	println('Hi: This is an improper task on AWS')

	# Create a tmp file
	fileName := 'tmp.txt'
	fileName.write("OK")

	# Uplad to S3
	println("Uploading local file '$fileName' to '$out'")
	out.upload(fileName)

	# Print something
	for(int i=0 ; i < 10; i++) {
		println "Counting: $i"
	}
	println "Bye!"
}
println "After"
wait
println "Done"
